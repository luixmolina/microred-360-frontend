import React, {useEffect, useState} from 'react';
import Resumen  from "./Resumen";
import Detallados  from "./Detallados";
import { useLocation } from 'react-router-dom';
import NavbarInside from './NavbarInside';
import Footer from './Footer';
import CargandoD from './CargandoD';
import Error500 from './Error500';
import PerfilTensiones from './perfil_tensiones';
import PerfilTensionesD from './perfil_tensionesD';
import Graficos from './Graficos';

function MR360D() {

    

    var resultados =
         [{
            "energy_saving": "1687",
            "economic_saving": "977829",
            "environmental_saving": "213"
          },
          {
            "pv_power": "3.00",
            "inverter_type": "HÃ­brido",
            "charger_inverter_power": "No se requiere inversor cargador",
            "battery_bank_power": "3.36"
          },
          {
            "failure_day": 27,
            "failure_month": 7,
            "failure_hour": 9,
            "failure_duration": "2",
            "failure_energy": "0.98"
          },
          {
            "imported_energy": "284",
            "exported_energy": "2844",
            "energy_purchases": "253296",
            "energy_sales": "937923",
            "pv_and_inverter_cost": "1208280",
            "battery_bank_cost": "255352",
            "investment_cost": "1463632"
          },
          {
            "demand_profile": [
              0.213,
              0.382,
              0.055,
              0.055,
              0.139,
              0.055,
              0.055,
              0.055,
              0.135,
              0.358,
              0.271,
              0.185,
              0.211,
              0.243,
              0.24,
              0.116,
              0.055,
              0.055,
              0.055,
              0.055,
              0.055,
              0.056,
              0.062,
              0.056,
              0.928,
              0.056,
              0.083,
              0.272,
              0.2,
              0.106,
              1.022,
              2.11,
              0.172,
              0.246,
              0.192,
              0.161,
              0.523,
              1.675,
              0.56,
              0.055,
              0.055,
              0.055,
              0.055,
              0.187,
              0.055,
              0.055,
              0.091,
              0.107
            ],
            "solar_profile": [
              1.677,
              1.8239999999999998,
              2.1029999999999998,
              1.677,
              1.6110000000000002,
              1.008,
              0.522,
              0.477,
              0.177,
              0.003,
              0,
              0,
              0,
              0,
              0,
              0,
              0,
              0,
              0,
              0,
              0,
              0.123,
              0.45899999999999996,
              1.1520000000000001,
              1.59,
              1.851,
              1.371,
              1.8119999999999998,
              1.7309999999999999,
              1.4609999999999999,
              1.5510000000000002,
              0.762,
              0.21599999999999997,
              0.012,
              0,
              0,
              0,
              0,
              0,
              0,
              0,
              0,
              0,
              0,
              0,
              0.135,
              0.618,
              1.2209999999999999
            ],
            "imported_energy_profile": [
              0,
              0,
              0,
              0,
              0,
              0,
              0,
              0,
              0,
              0,
              0,
              0,
              0,
              0,
              0,
              0,
              0,
              0,
              0,
              0,
              0,
              0,
              0,
              0,
              0,
              0,
              0,
              0,
              0,
              0,
              0,
              0,
              0,
              0,
              0.192,
              0,
              0.523,
              0.96136,
              0.56,
              0.055,
              0.055,
              0.055,
              0.055,
              0.187,
              0.055,
              0,
              0,
              0
            ],
            "exported_energy_profile": [
              -1.464,
              -1.442,
              -2.048,
              -1.622,
              -0.062259259,
              -0.953,
              0,
              0,
              0,
              0,
              0,
              0,
              0,
              0,
              0,
              0,
              0,
              0,
              0,
              0,
              0,
              -0.064111111,
              -0.397,
              -1.096,
              0,
              0,
              -1.288,
              -1.54,
              -1.531,
              -1.355,
              0,
              0,
              0,
              0,
              0,
              0,
              0,
              0,
              0,
              0,
              0,
              0,
              0,
              0,
              0,
              -0.08,
              -0.527,
              -1.114
            ],
            "charge_battery_profile": [
              0,
              0,
              0,
              0,
              -1.4097407,
              0,
              -0.467,
              -0.422,
              -0.042,
              0,
              0,
              0,
              0,
              0,
              0,
              0,
              0,
              0,
              0,
              0,
              0,
              -0.0028888889,
              0,
              0,
              -0.662,
              -1.795,
              0,
              0,
              0,
              0,
              -0.529,
              0,
              -0.044,
              0,
              0,
              0,
              0,
              0,
              0,
              0,
              0,
              0,
              0,
              0,
              0,
              0,
              0,
              0
            ],
            "discharge_battery_profile": [
              0,
              0,
              0,
              0,
              0,
              0,
              0,
              0,
              0,
              0.355,
              0.271,
              0.185,
              0.211,
              0.243,
              0.24,
              0.116,
              0.055,
              0.055,
              0.055,
              0.055,
              0.055,
              0,
              0,
              0,
              0,
              0,
              0,
              0,
              0,
              0,
              0,
              1.348,
              0,
              0.234,
              0,
              0.161,
              0,
              0.71364,
              0,
              0,
              0,
              0,
              0,
              0,
              0,
              0,
              0,
              0
            ],
            "battery_energy": [
              20,
              20,
              20,
              20,
              57.73283866171004,
              57.73283866171004,
              70.23246691449815,
              81.52763420074349,
              82.65179776951675,
              70.9211063197026,
              61.96612936802974,
              55.852954646840146,
              48.88062750929368,
              40.85088773234201,
              32.92027955390335,
              29.087154200743498,
              27.26972312267658,
              25.452292342007432,
              23.63486156133829,
              21.81743078066915,
              20,
              20.077323420074354,
              20.077323420074354,
              20.077323420074354,
              37.79628252788104,
              85.84089219330856,
              85.84089219330856,
              85.84089219330856,
              85.84089219330856,
              85.84089219330856,
              100,
              55.45642230483272,
              56.63411747211896,
              48.901775464684015,
              48.901775464684015,
              43.581659479553906,
              43.581659479553906,
              20,
              20,
              20,
              20,
              20,
              20,
              20,
              20,
              20,
              20,
              20
            ],
            "battery_profile": [
              0,
              0,
              0,
              0,
              -1.4097407,
              0,
              -0.467,
              -0.422,
              -0.042,
              0.355,
              0.271,
              0.185,
              0.211,
              0.243,
              0.24,
              0.116,
              0.055,
              0.055,
              0.055,
              0.055,
              0.055,
              -0.0028888889,
              0,
              0,
              -0.662,
              -1.795,
              0,
              0,
              0,
              0,
              -0.529,
              1.348,
              -0.044,
              0.234,
              0,
              0.161,
              0,
              0.71364,
              0,
              0,
              0,
              0,
              0,
              0,
              0,
              0,
              0,
              0
            ],
            "hour_index": [
              9,
              10,
              11,
              12,
              13,
              14,
              15,
              16,
              17,
              18,
              19,
              20,
              21,
              22,
              23,
              0,
              1,
              2,
              3,
              4,
              5,
              6,
              7,
              8,
              9,
              10,
              11,
              12,
              13,
              14,
              15,
              16,
              17,
              18,
              19,
              20,
              21,
              22,
              23,
              0,
              1,
              2,
              3,
              4,
              5,
              6,
              7,
              8
            ], "id_user": "sfsdfdf"
          }
        ];

      const [backendData, setBackendData] = useState(undefined)
    let { state } = useLocation();
    function getResults() {
    
     setBackendData(resultados);
    }

    useEffect(() => {

       
        setTimeout(getResults, 10000);

    }, [])

    return(
        <div>
            {
                ( backendData === undefined) ? (
                    <div className="container_resultados">
                        <CargandoD />
                    </div>
                ): ( backendData.status === "error") ?  <Error500 /> : (
                    <>
                    <NavbarInside />
                    <div id="container_resultados" className="container_resultados">
                    <Resumen energy_saving={backendData[0].energy_saving} economic_saving={backendData[0].economic_saving} environmental_saving={backendData[0].environmental_saving} 
                    battery_bank_power={backendData[1].battery_bank_power} inverter_type={backendData[1].inverter_type} pv_power={backendData[1].pv_power}
                    charger_inverter_power={backendData[1].charger_inverter_power}>
                    </Resumen>
                    <Detallados failure_day={backendData[2].failure_day}
                     failure_month={backendData[2].failure_month}
                     failure_hour={backendData[2].failure_hour}
                     failure_duration={backendData[2].failure_duration}
                     failure_energy={backendData[2].failure_energy}
                     imported_energy={backendData[3].imported_energy}
                     energy_purchases={backendData[3].energy_purchases}
                     energy_sales={backendData[3].energy_sales}
                     pv_and_inverter_cost={backendData[3].pv_and_inverter_cost}
                     battery_bank_cost={backendData[3].battery_bank_cost}
                     investment_cost={backendData[3].investment_cost}
                     exported_energy={backendData[3].exported_energy}>
                     </Detallados>
                    </div>
                    <Graficos imported_energy_profile={backendData[4].imported_energy_profile}
                      exported_energy_profile={backendData[4].exported_energy_profile}
                      solar_profile={backendData[4].solar_profile}
                      charge_battery_profile={backendData[4].charge_battery_profile}
                      discharge_battery_profile={backendData[4].discharge_battery_profile}
                      demand_profile={backendData[4].demand_profile}
                      hour_index={backendData[4].hour_index}
                      battery_energy={backendData[4].battery_energy}>
                    </Graficos>
                   <PerfilTensionesD demand_profile={backendData[4].demand_profile } solar_profile={backendData[4].solar_profile } battery_profile={backendData[4].battery_profile }  hour_index={backendData[4].hour_index}  />
                    <Footer />
                    </>
                 )}
        </div>
    )
}

export default MR360D